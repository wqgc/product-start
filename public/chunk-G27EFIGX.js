import{d as h,e as u,f as w,h as g,i as s,j as i}from"./chunk-BGUH4UV6.js";var d=class{static async register(t,r){let o=s();return h(o,t,r).then(e=>e.user).catch(e=>{throw new Error(e)})}static async updateCurrentDisplayName(t){let r=s();if(r.currentUser!==null)return w(r.currentUser,{displayName:t}).then(()=>t).catch(o=>{throw new Error(o)});throw new Error("User not signed in")}static async updateDB(t,r){var o;try{let e=await((o=s().currentUser)==null?void 0:o.getIdToken(!0));if(!e)throw new Error("User missing");return fetch(`${i.BASE_URL}/users/${t}`,{method:"PUT",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then(c=>c.ok?t:Promise.reject(c)).catch(c=>{throw new Error(c)})}catch(e){throw new Error(e)}}static async get(t){return fetch(`${i.BASE_URL}/users/${t}`).then(r=>r.ok?r.json():Promise.reject(r)).then(r=>r).catch(r=>{throw new Error(r)})}static async logout(){let t=s();g(t).catch(r=>{throw new Error(r)})}static async login(t,r){let o=s();return u(o,t,r).then(e=>e.user).catch(e=>{throw new Error(e)})}static async createCheckoutSession(t,r){var o;try{let{currentUser:e}=s(),c=await((o=s().currentUser)==null?void 0:o.getIdToken(!0));if(!c||!e)throw new Error("User missing");let a=await fetch(`${i.BASE_URL}/create-checkout-session/${t}`,{method:"POST",body:JSON.stringify({pledgeAmount:r,pledgerUID:e.uid}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}}).then(n=>n.ok?n.json():Promise.reject(n)).then(n=>n).catch(n=>{throw new Error(n)});return fetch(`${i.BASE_URL}/pledge`,{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then(n=>(n.ok&&(window.location=a.url),Promise.reject(n))).catch(n=>{throw new Error(n)})}catch(e){throw new Error(e)}}static async confirmPledge(){return fetch(`${i.BASE_URL}/pledge/confirm`,{method:"POST"}).catch(t=>{throw new Error(t)})}},E=d;export{E as a};
