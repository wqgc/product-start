import{a as S}from"./chunk-Z3EJIW72.js";import{a as h}from"./chunk-T2BU323Z.js";import"./chunk-S6LVBEUU.js";import{a as b}from"./chunk-D4RARUUX.js";import{a as m}from"./chunk-GFLQL2OI.js";import"./chunk-AVVFLK4W.js";import"./chunk-MLLMWUDP.js";import"./chunk-XCKYJCSI.js";import"./chunk-M5VJKR3C.js";import{a as u}from"./chunk-G27EFIGX.js";import"./chunk-FXRGY3TF.js";import"./chunk-BGUH4UV6.js";import{d as E,f as F}from"./chunk-DRMASW6M.js";var e=E(F());var v=class{static async formSubmit({data:r,setAlert:a,setErrors:l,setUser:i,setSubmitLoading:n}){if(a!==null&&i!==null)if(this.isFormValid(r,l)){n(!0);try{let{uid:t}=await u.register(r.email,r.password);await u.updateCurrentDisplayName(r.displayName),await u.updateDB(t,{displayName:r.displayName}),i({uid:"",signedIn:!0,profile:{displayName:r.displayName}}),a({message:"Registered successfully!",type:"success"})}catch(t){a({message:t.message,type:"error"})}n(!1)}else a({message:"Form data invalid.",type:"error"})}static isFormValid(r,a){let{email:l,displayName:i,password:n,confirmPassword:t}=r,s={email:!1,displayName:!1,password:!1,confirmPassword:!1};return l&&i&&n&&t?(/^[^@ \t\r\n]+@[^@ \t\r\n]+\.[^@ \t\r\n]+$/.test(l)||(s.email=!0),/^[a-zA-Z0-9_-]{3,32}$/.test(i)||(s.displayName=!0),/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$ %^&*-]).{6,}$/.test(n)||(s.password=!0),t!==n&&(s.confirmPassword=!0),a(s),!(s.email||s.displayName||s.password||s.confirmPassword)):!1}},f=v;var T=()=>{let{setAlert:g}=(0,e.useContext)(b),{setUser:r}=(0,e.useContext)(S),[a,l]=(0,e.useState)(""),[i,n]=(0,e.useState)(""),[t,s]=(0,e.useState)(""),[d,D]=(0,e.useState)(""),[N,P]=(0,e.useState)({email:a,displayName:i,password:t,confirmPassword:d}),[p,w]=(0,e.useState)({email:!1,displayName:!1,password:!1,confirmPassword:!1}),[R,y]=(0,e.useState)(!0),[x,C]=(0,e.useState)(!1);(0,e.useEffect)(()=>{let o={email:a.trim(),displayName:i.trim(),password:t,confirmPassword:d};P(o);let A=f.isFormValid(o,w);y(!A)},[a,i,t,d,y]);let c={email:"Must be a valid email address",displayName:"Must only contain letters and be between 3-32 characters",password:"Must be longer than six characters, contain one upper and lowercase letter, one number, and one special character",confirmPassword:"Must match password"};return e.default.createElement("div",null,e.default.createElement("h2",null,"Register"),e.default.createElement("div",{className:"form-container"},e.default.createElement(m,{id:"email-input",helperText:c.email,label:"Email Address",error:p.email,value:a,onChange:({target:o})=>l(o.value),required:!0}),e.default.createElement(m,{id:"displayname-input",helperText:c.displayName,label:"Display Name",error:p.displayName,value:i,onChange:({target:o})=>n(o.value),required:!0}),e.default.createElement(m,{id:"password-input",helperText:c.password,type:"password",label:"Password",error:p.password,value:t,onChange:({target:o})=>s(o.value),required:!0}),e.default.createElement(m,{id:"confirmpassword-input",helperText:c.confirmPassword,type:"password",label:"Confirm Password",error:p.confirmPassword,value:d,onChange:({target:o})=>D(o.value),required:!0}),e.default.createElement(h,{variant:"contained",loading:x,onClick:()=>f.formSubmit({data:N,setAlert:g,setErrors:w,setUser:r,setSubmitLoading:C}),disabled:R},"Register")))},z=T;export{z as default};
