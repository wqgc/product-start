import{i as a,j as n}from"./chunk-BGUH4UV6.js";import{a as i,b as s}from"./chunk-DRMASW6M.js";var h=class{static async getLatestProducts(){return fetch(`${n.BASE_URL}/products`).then(r=>r.ok?r.json():Promise.reject(r)).then(r=>r).catch(r=>{throw new Error(r)})}static async getProduct(r){return fetch(`${n.BASE_URL}/products/${r}`).then(t=>t.ok?t.json():Promise.reject(t)).then(t=>t).catch(t=>{throw new Error(t)})}static async create(r){var t;try{let o=await((t=a().currentUser)==null?void 0:t.getIdToken(!0));if(!o)throw new Error("User missing");return fetch(`${n.BASE_URL}/products`,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`}}).then(e=>e.ok?e.json():Promise.reject(e)).then(e=>s(i({},r),{productUID:e})).catch(e=>{throw new Error(e)})}catch(o){throw new Error(o)}}static async updateLatestProducts(r,t=!1){return fetch(`${n.BASE_URL}/products`,{method:"PATCH",body:JSON.stringify(t===!0?s(i({},r),{remove:!0}):r),headers:{"Content-Type":"application/json"}}).then(o=>o.ok?r:Promise.reject(o)).catch(o=>{throw new Error(o)})}static async updateProduct(r,t){var o;try{let e=await((o=a().currentUser)==null?void 0:o.getIdToken(!0));if(!e)throw new Error("User missing");return fetch(`${n.BASE_URL}/products/${r}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then(c=>c.ok?t:Promise.reject(c)).catch(c=>{throw new Error(c)})}catch(e){throw new Error(e)}}static async delete(r){var t;try{let o=await((t=a().currentUser)==null?void 0:t.getIdToken(!0));if(!o)throw new Error("User missing");return fetch(`${n.BASE_URL}/products/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${o}`}}).then(e=>e.ok?Promise.resolve(e):Promise.reject(e)).catch(e=>{throw new Error(e)})}catch(o){throw new Error(o)}}},f=h;export{f as a};
